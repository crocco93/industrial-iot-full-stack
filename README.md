# Industrial IoT Full-Stack Application üè≠

[![Build Status](https://img.shields.io/badge/build-passing-brightgreen)](https://github.com/crocco93/industrial-iot-full-stack)
[![License](https://img.shields.io/badge/license-MIT-blue)](LICENSE)
[![Python](https://img.shields.io/badge/python-3.9+-blue)](https://python.org)
[![React](https://img.shields.io/badge/react-18+-blue)](https://reactjs.org)
[![FastAPI](https://img.shields.io/badge/fastapi-0.104+-green)](https://fastapi.tiangolo.com)

Kompletny system zarzƒÖdzania urzƒÖdzeniami przemys≈Çowymi IoT z obs≈ÇugƒÖ wielu protoko≈Ç√≥w komunikacyjnych, analitykƒÖ w czasie rzeczywistym, zaawansowanymi dashboardami i systemem alert√≥w.

## ‚ú® G≈Ç√≥wne funkcje

### üîå Obs≈Çuga protoko≈Ç√≥w przemys≈Çowych
- **Modbus TCP/RTU** - PLC i sensory przemys≈Çowe
- **OPC-UA** - Systemy SCADA i automatyki
- **Profinet** - UrzƒÖdzenia Siemens i automatyka
- **EtherNet/IP** - RozwiƒÖzania Allen-Bradley/Rockwell
- **MQTT** - IoT i systemy rozproszone
- **CANopen** - Systemy embedded i automotive
- **BACnet** - Systemy budynkowe i HVAC

### üìä Zaawansowana analityka
- **Dashboardy w czasie rzeczywistym** z konfigurowalnymi widgetami
- **Analiza historyczna** z agregacjami (raw/hourly/daily)
- **Eksport danych** do CSV/Excel dla dalszej analizy
- **Wska≈∫niki KPI** i metryki wydajno≈õci
- **Wykresy trend√≥w** z multiple data points

### üö® Inteligentny system alert√≥w
- **Alerty progowe** z konfigurowalnymi limitami
- **ZarzƒÖdzanie alertami** (acknowledge/resolve/mute)
- **Operacje bulk** na wielu alertach jednocze≈õnie
- **Integracje webhook** (Slack, Teams, email)
- **Filtrowanie i kategoryzacja** alert√≥w
- **WebSocket real-time** powiadomienia

### üèóÔ∏è ZarzƒÖdzanie hierarchiƒÖ
- **Struktura hierarchiczna** (Lokalizacja ‚Üí Area ‚Üí UrzƒÖdzenie ‚Üí Punkt danych)
- **Drag & Drop** reorganizacja w drzewku
- **Wyszukiwanie i filtrowanie** urzƒÖdze≈Ñ
- **ZarzƒÖdzanie po≈ÇƒÖczeniami** i protoko≈Çami

### üîß Monitorowanie systemu
- **Health checks** wszystkich komponent√≥w
- **Metryki systemowe** (CPU, RAM, Disk)
- **Status po≈ÇƒÖcze≈Ñ** i protoko≈Ç√≥w w czasie rzeczywistym
- **Logi systemowe** z r√≥≈ºnymi poziomami szczeg√≥≈Çowo≈õci

## üèõÔ∏è Architektura systemu

### Backend (FastAPI)
```
backend/
‚îú‚îÄ‚îÄ api/                    # REST API endpoints
‚îÇ   ‚îú‚îÄ‚îÄ protocols.py       # ZarzƒÖdzanie protoko≈Çami
‚îÇ   ‚îú‚îÄ‚îÄ devices.py         # CRUD urzƒÖdze≈Ñ
‚îÇ   ‚îú‚îÄ‚îÄ data_points.py     # Punkty danych i odczyty
‚îÇ   ‚îú‚îÄ‚îÄ historical.py      # API danych historycznych
‚îÇ   ‚îú‚îÄ‚îÄ alerts.py          # System alert√≥w
‚îÇ   ‚îú‚îÄ‚îÄ health.py          # Health checks
‚îÇ   ‚îî‚îÄ‚îÄ dashboards.py      # ZarzƒÖdzanie dashboardami
‚îú‚îÄ‚îÄ models/                 # Modele danych (Beanie/MongoDB)
‚îÇ   ‚îú‚îÄ‚îÄ device.py          # Model urzƒÖdzenia
‚îÇ   ‚îú‚îÄ‚îÄ protocol.py        # Model protoko≈Çu
‚îÇ   ‚îú‚îÄ‚îÄ data_point.py      # Model punktu danych
‚îÇ   ‚îú‚îÄ‚îÄ alert.py           # Model alertu
‚îÇ   ‚îî‚îÄ‚îÄ monitoring.py      # Dane monitorowania
‚îú‚îÄ‚îÄ services/              # Logika biznesowa
‚îÇ   ‚îú‚îÄ‚îÄ protocol_services/ # Implementacje protoko≈Ç√≥w
‚îÇ   ‚îú‚îÄ‚îÄ websocket_manager.py # WebSocket real-time
‚îÇ   ‚îî‚îÄ‚îÄ protocol_manager.py # ZarzƒÖdzanie protoko≈Çami
‚îî‚îÄ‚îÄ database/              # Konfiguracja MongoDB
```

### Frontend (React + TypeScript)
```
frontend/src/
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ monitoring/        # Komponenty monitorowania
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SystemDashboard.tsx # G≈Ç√≥wny dashboard
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AlertPanel.tsx     # Panel alert√≥w
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ProtocolMetrics.tsx # Metryki protoko≈Ç√≥w
‚îÇ   ‚îú‚îÄ‚îÄ devices/          # ZarzƒÖdzanie urzƒÖdzeniami
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DeviceManager.tsx  # Lista i zarzƒÖdzanie
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AddDeviceDialog.tsx # Dodawanie urzƒÖdze≈Ñ
‚îÇ   ‚îú‚îÄ‚îÄ protocols/        # ZarzƒÖdzanie protoko≈Çami
‚îÇ   ‚îú‚îÄ‚îÄ history/          # Analiza historyczna
‚îÇ   ‚îú‚îÄ‚îÄ dashboard/        # Komponenty dashboardu
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ DashboardGrid.tsx  # Grid z drag&drop
‚îÇ   ‚îú‚îÄ‚îÄ settings/         # Ustawienia systemowe
‚îÇ   ‚îî‚îÄ‚îÄ common/           # Wsp√≥lne komponenty
‚îÇ       ‚îî‚îÄ‚îÄ HierarchicalTree.tsx # Drzewko hierarchiczne
‚îú‚îÄ‚îÄ hooks/                # React hooks
‚îÇ   ‚îú‚îÄ‚îÄ useWebSocket.ts   # WebSocket hook
‚îÇ   ‚îî‚îÄ‚îÄ use-toast.ts      # Toast notifications
‚îî‚îÄ‚îÄ services/
    ‚îî‚îÄ‚îÄ api.ts            # HTTP client
```

## üöÄ Szybki start

### Wymagania systemowe
- **Python 3.9+**
- **Node.js 18+**
- **MongoDB 6.0+**
- **Redis 7.0+** (opcjonalnie)

### 1. Klonowanie repozytorium
```bash
git clone https://github.com/crocco93/industrial-iot-full-stack.git
cd industrial-iot-full-stack
```

### 2. Konfiguracja backendu
```bash
cd backend

# Tworzenie ≈õrodowiska wirtualnego
python -m venv venv
source venv/bin/activate  # Linux/Mac
# lub
venv\\Scripts\\activate   # Windows

# Instalacja zale≈ºno≈õci
pip install -r requirements.txt

# Konfiguracja zmiennych ≈õrodowiskowych
cp .env.example .env
# Edytuj .env z w≈Ça≈õciwymi warto≈õciami
```

**Kluczowe zmienne ≈õrodowiskowe:**
```bash
# Database
MONGODB_URL=mongodb://localhost:27017
DATABASE_NAME=industrial_iot

# Security
SECRET_KEY=your-secret-key-here
JWT_SECRET_KEY=your-jwt-secret

# CORS
CORS_ORIGINS=["http://localhost:3000","http://localhost:5173"]

# External services (opcjonalnie)
N8N_WEBHOOK_URL=http://localhost:5678/webhook
OLLAMA_API_URL=http://localhost:11434
```

### 3. Uruchomienie backendu
```bash
# Development mode
uvicorn main:app --host 0.0.0.0 --port 3001 --reload

# Production mode
uvicorn main:app --host 0.0.0.0 --port 3001
```

### 4. Konfiguracja frontendu
```bash
cd frontend

# Instalacja zale≈ºno≈õci
npm install

# Konfiguracja zmiennych
cp .env.example .env.local
# Edytuj .env.local
```

**Frontend environment (.env.local):**
```bash
VITE_API_URL=http://localhost:3001
VITE_WS_URL=ws://localhost:3001
```

### 5. Uruchomienie frontendu
```bash
# Development mode
npm run dev

# Production build
npm run build
npm run preview
```

### 6. Dostƒôp do aplikacji
- **Frontend:** http://localhost:5173
- **Backend API:** http://localhost:3001
- **API Documentation:** http://localhost:3001/docs
- **Health Check:** http://localhost:3001/health

## üê≥ Docker deployment

### Docker Compose (najprostszy spos√≥b)
```bash
# Uruchomienie ca≈Çego stacku
docker-compose up -d

# Sprawdzenie statusu
docker-compose ps

# Logi
docker-compose logs -f
```

### Budowanie obraz√≥w
```bash
# Backend
cd backend
docker build -t industrial-iot-backend .

# Frontend  
cd frontend
docker build -t industrial-iot-frontend .
```

## üì° API Endpoints

### G≈Ç√≥wne kategorie API

#### üîå Protoko≈Çy
- `GET /api/protocols` - Lista protoko≈Ç√≥w
- `POST /api/protocols` - Dodaj nowy protok√≥≈Ç
- `PUT /api/protocols/{id}` - Aktualizuj protok√≥≈Ç
- `DELETE /api/protocols/{id}` - Usu≈Ñ protok√≥≈Ç
- `POST /api/protocols/{id}/start` - Uruchom protok√≥≈Ç
- `POST /api/protocols/{id}/stop` - Zatrzymaj protok√≥≈Ç

#### üîß UrzƒÖdzenia
- `GET /api/devices` - Lista urzƒÖdze≈Ñ
- `POST /api/devices` - Dodaj urzƒÖdzenie
- `PUT /api/devices/{id}` - Aktualizuj urzƒÖdzenie
- `DELETE /api/devices/{id}` - Usu≈Ñ urzƒÖdzenie
- `GET /api/devices/{id}/data-points` - Punkty danych urzƒÖdzenia

#### üìä Dane historyczne
- `GET /api/data-points/historical` - Dane historyczne
- `GET /api/data-points/{id}/stats` - Statystyki punktu danych
- `POST /api/data-points/{id}/historical` - Dodaj dane historyczne
- `DELETE /api/data-points/{id}/historical` - Wyczy≈õƒá dane

#### üö® Alerty
- `GET /api/alerts` - Lista alert√≥w z filtrowaniem
- `POST /api/alerts` - Utw√≥rz alert
- `PUT /api/alerts/{id}/acknowledge` - Potwierd≈∫ alert
- `PUT /api/alerts/{id}/resolve` - RozwiƒÖ≈º alert
- `PUT /api/alerts/{id}/mute` - Wycisz alert
- `POST /api/alerts/bulk-acknowledge` - Bulk acknowledge
- `GET /api/alerts/stats` - Statystyki alert√≥w

#### üìà Dashboardy
- `GET /api/dashboards` - Lista dashboard√≥w
- `POST /api/dashboards` - Utw√≥rz dashboard
- `PUT /api/dashboards/{id}` - Aktualizuj dashboard
- `DELETE /api/dashboards/{id}` - Usu≈Ñ dashboard

#### üè• System Health
- `GET /api/health` - Health check
- `GET /api/health/detailed` - Szczeg√≥≈Çowy status
- `GET /api/status` - Status API

## üîß Konfiguracja protoko≈Ç√≥w

### Modbus TCP
```json
{
  "name": "PLC Modbus",
  "type": "modbus-tcp",
  "configuration": {
    "host": "192.168.1.100",
    "port": 502,
    "unit_id": 1,
    "timeout": 3.0,
    "read_coils": [1, 10],
    "read_holding_registers": [40001, 10]
  }
}
```

### OPC-UA
```json
{
  "name": "SCADA OPC-UA",
  "type": "opc-ua",
  "configuration": {
    "endpoint_url": "opc.tcp://192.168.1.101:4840",
    "security_mode": "None",
    "nodes_to_read": [
      "ns=2;i=2",
      "ns=2;s=Temperature"
    ]
  }
}
```

### MQTT
```json
{
  "name": "IoT MQTT Broker",
  "type": "mqtt",
  "configuration": {
    "broker_host": "192.168.1.102",
    "broker_port": 1883,
    "topics": [
      "sensors/temperature",
      "sensors/humidity"
    ],
    "qos": 1
  }
}
```

## ‚öôÔ∏è Nowe funkcje (v1.0.0)

### üîÑ WebSocket Real-time Updates
System wykorzystuje WebSocket do aktualizacji w czasie rzeczywistym:
- **Alerty** - natychmiastowe powiadomienia o nowych alertach
- **Status urzƒÖdze≈Ñ** - aktualizacje stanu po≈ÇƒÖcze≈Ñ
- **Dane pomiarowe** - real-time data streaming
- **Dashboard updates** - automatyczne od≈õwie≈ºanie widget√≥w

**Przyk≈Çad u≈ºycia WebSocket hook:**
```typescript
const { isConnected, lastMessage } = useWebSocket(
  'ws://localhost:3001/ws/alerts',
  {
    onMessage: (data) => {
      if (data.type === 'alert_created') {
        // Obs≈Çu≈º nowy alert
      }
    }
  }
);
```

### üìä Dashboard Grid System
Zaawansowany system dashboard√≥w z drag & drop:
- **Responsywny grid** - automatyczne dopasowanie
- **Drag & Drop** - przemieszczanie widget√≥w
- **Konfigurowalwe wid≈ºety** - gauge, charts, KPI, tables
- **Zapisywanie layout√≥w** - persistence w bazie danych

### üö® Advanced Alert Management
Kompleksowy system zarzƒÖdzania alertami:
- **Acknowledgment** - potwierdzanie alert√≥w przez u≈ºytkownik√≥w
- **Bulk operations** - operacje na wielu alertach
- **Filtrowanie** - po severity, status, kategoria
- **Webhook integracje** - automatyczne powiadomienia (Slack/Teams)
- **Template system** - predefiniowane typy alert√≥w
- **Statistics** - szczeg√≥≈Çowe statystyki alert√≥w

### üå≥ Enhanced Hierarchical Tree
ZarzƒÖdzanie strukturƒÖ urzƒÖdze≈Ñ:
- **Lokalizacje** ‚Üí **Obszary** ‚Üí **UrzƒÖdzenia** ‚Üí **Punkty danych**
- **Drag & Drop reorganization** - przemieszczanie w hierarchii
- **Search & Filter** - szybkie wyszukiwanie
- **Status indicators** - wizualne wska≈∫niki stanu
- **Collapsible sidebar** - oszczƒôdno≈õƒá miejsca

## üìà Monitoring i metryki

### System Health Checks
- **Database connectivity** - MongoDB connection status
- **Protocol manager** - status wszystkich protoko≈Ç√≥w
- **WebSocket manager** - po≈ÇƒÖczenia real-time
- **Memory usage** - wykorzystanie zasob√≥w
- **Disk space** - dostƒôpne miejsce

### Performance Metrics
- **Response times** - czasy odpowiedzi API
- **Data throughput** - przepustowo≈õƒá danych
- **Connection stability** - stabilno≈õƒá po≈ÇƒÖcze≈Ñ
- **Error rates** - czƒôstotliwo≈õƒá b≈Çƒôd√≥w

### Alert Statistics
```json
{
  "total": 45,
  "active": 12,
  "acknowledged": 18,
  "resolved": 15,
  "by_severity": {
    "critical": 3,
    "high": 8,
    "medium": 15,
    "low": 12,
    "info": 7
  }
}
```

## üîí Bezpiecze≈Ñstwo

### Authentication & Authorization
- **JWT tokens** - secure session management
- **Password policies** - wymuszone silne has≈Ça  
- **Session timeouts** - automatyczne wylogowanie
- **API rate limiting** - ochrona przed abuse

### Data Protection
- **Encryption at rest** - szyfrowanie danych w bazie
- **TLS/SSL** - szyfrowane po≈ÇƒÖczenia
- **Input validation** - walidacja wszystkich danych
- **SQL injection protection** - parametryzowane zapytania

## üêõ Troubleshooting

### Typowe problemy

#### Backend nie startuje
```bash
# Sprawd≈∫ logi
docker-compose logs backend

# Sprawd≈∫ po≈ÇƒÖczenie z bazƒÖ danych
mongo mongodb://localhost:27017/industrial_iot
```

#### Frontend nie ≈ÇƒÖczy siƒô z API
```bash
# Sprawd≈∫ zmienne ≈õrodowiskowe
cat frontend/.env.local

# Sprawd≈∫ CORS w backend
curl -H "Origin: http://localhost:5173" \\
     -H "Access-Control-Request-Method: POST" \\
     http://localhost:3001/api/health
```

#### WebSocket nie dzia≈Ça
```bash
# Test WebSocket connection
wscat -c ws://localhost:3001/ws/alerts
```

## üìù Changelog

### v1.0.0 (2025-11-01)
#### ‚ú® Nowe funkcje
- ‚úÖ **WebSocket real-time updates** - automatyczne aktualizacje UI
- ‚úÖ **Comprehensive alert system** - zarzƒÖdzanie alertami z acknowledgment
- ‚úÖ **Dashboard grid system** - drag & drop widgets
- ‚úÖ **Hierarchical device management** - struktura drzewkowa z drag & drop
- ‚úÖ **Historical data analysis** - analiza z agregacjami (raw/hourly/daily)
- ‚úÖ **Health monitoring system** - kompleksowy monitoring stanu
- ‚úÖ **Advanced settings** - konfiguracja na ≈ºywo z walidacjƒÖ

#### üîß Ulepszenia techniczne
- ‚úÖ **Removed all mock data** - wszystkie komponenty u≈ºywajƒÖ prawdziwych API
- ‚úÖ **Fixed circular imports** - przepisane modele Beanie
- ‚úÖ **Added missing dependencies** - psutil, httpx, UI components
- ‚úÖ **Improved error handling** - graceful degradation
- ‚úÖ **API route integration** - wszystkie endpointy pod≈ÇƒÖczone do main.py

#### üõ†Ô∏è Protoko≈Çy
- ‚úÖ **Modbus TCP/RTU** - kompletna implementacja
- ‚úÖ **OPC-UA** - obs≈Çuga node browsing
- ‚úÖ **MQTT** - pub/sub z QoS
- ‚úÖ **EtherNet/IP** - Allen-Bradley compatibility
- ‚úÖ **Profinet** - Siemens integration
- ‚úÖ **CANopen** - embedded systems support
- ‚úÖ **BACnet** - building automation

## üîß Rozw√≥j i customizacja

### Dodawanie nowych protoko≈Ç√≥w
1. Utw√≥rz implementacjƒô w `backend/services/protocol_services/`
2. Dodaj konfiguracjƒô do `protocol_services.py`
3. Zaktualizuj frontend form w `AddProtocolDialog.tsx`

### Custom widgets dla dashboard√≥w
1. Utw√≥rz komponent w `frontend/src/components/widgets/`
2. Zarejestruj w `DashboardGrid.tsx`
3. Dodaj konfiguracjƒô w backend API

### Webhook integracje
System wspiera webhook integracje dla:
- **Slack** - powiadomienia na kana≈Çy
- **Microsoft Teams** - integracja z Teams
- **Email** - alerty przez email  
- **Custom endpoints** - w≈Çasne integracje

## ü§ù Contributing

### Development workflow
1. Fork repository
2. Create feature branch: `git checkout -b feature/new-feature`
3. Commit changes: `git commit -am 'Add new feature'`
4. Push branch: `git push origin feature/new-feature`  
5. Submit Pull Request

### Code style
- **Backend:** Black + isort formatting
- **Frontend:** Prettier + ESLint
- **Commits:** Conventional commits format

## üìÑ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## üë• Authors

- **Arek Wilczek** - *Initial work* - [@crocco93](https://github.com/crocco93)

## üôè Acknowledgments

- FastAPI community for excellent documentation
- React community for component patterns
- Industrial automation protocols communities
- MongoDB team for Beanie ODM
- Tailwind CSS for utility-first styling

---

## üìû Support

Je≈õli masz pytania lub problemy:

1. **Dokumentacja API:** http://localhost:3001/docs
2. **GitHub Issues:** https://github.com/crocco93/industrial-iot-full-stack/issues
3. **Email:** arekwilczek93@outlook.com

---

**Made with ‚ù§Ô∏è for Industrial IoT**

Last updated: November 1, 2025